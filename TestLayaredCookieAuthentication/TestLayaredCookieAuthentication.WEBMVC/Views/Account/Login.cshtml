@model TestLayaredCookieAuthentication.WEBMVC.Models.Account.LoginViewModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>MGC | Login</title>

    <!-- Mainly scripts -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>

    <link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="~/css/animate.css" rel="stylesheet">
    <link href="~/css/login.css" rel="stylesheet">
    <link href="~/css/mystyle.css" rel="stylesheet">

</head>

<body style='background-image:url("/images/Sheep flock in the Gobi Desert.jfif");'>

    <div class="right-login-box text-center loginscreen animated fadeInDown">
        <div class="out-login-box">
            <div>
                <div>

                    <h1 class="logo-name">MGC</h1>

                </div>
                <h3>MGC ye Hoşgeldiniz</h3>

                <p style="color:aliceblue;">Giriş yapın. Etkinliklerinizi yönetin.</p>
                <form class="m-t" role="form" method="post">
                    <div class="form-group">
                        <input id="UserName" name="UserName" type="text" class="form-control" placeholder="Kullanıcı Adı" required="">
                    </div>
                    <div class="form-group">
                        <input id="Password" name="Password" type="password" class="form-control" placeholder="Şifre" required="">
                    </div>
                    <div class="form-group" style="visibility:hidden; display:none; height:0; width:0;">
                        <input id="Token" name="Token" type="text" class="form-control" placeholder="Token" required />
                    </div>
                    <button id="sendBtn" type="button" class="btn btn-primary block full-width m-b">Giriş Yap    </button>

                    <div style="visibility:hidden; display:none; height:0; width:0; padding:0; margin:0;">
                        <button id="formBtn" type="submit" class="btn btn-primary block full-width m-b">Giriş Yap    </button>
                    </div>

                    <a href="#"><small style="color:#1ab394;">Şifrenizi mi unuttunuz?</small></a>
                    <p class="text-muted text-center"><small style="color:white;">Do not have an account?</small></p>
                    <a class="btn btn-sm btn-white btn-block" href="register.html">Hesap Oluştur</a>
                </form>
                <p class="m-t"> <small style="color:aliceblue;">MGC Muhammed Emin KARABOGA tarafından geliştirildi.&copy; 2019</small> </p>
            </div>
        </div>
    </div>

    <script>
        $('#sendBtn').click(function () {
            var username = $('#UserName').val();
            var password = $('#Password').val();

            var data = {
                UserName: username,
                Password: password,
                Email : " "
            };

            $.ajax({
                type: 'POST',
                url: 'http://localhost:51408/api/auth/login',
                data: JSON.stringify(data),
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                success: function (result) {
                    localStorage.removeItem('TOKEN');
                    localStorage.setItem('TOKEN', JSON.stringify(result));
                    $('#Token').val(localStorage.getItem('TOKEN').replace('"', '').replace('"', ''));
                    console.log($('#Token').val());
                    $('#formBtn').click();
                }
            });

            
        });

    </script>

</body>
</html>
